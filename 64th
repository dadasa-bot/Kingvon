local screenGui = Instance.new("ScreenGui", game:GetService("CoreGui"))
screenGui.Name = "screenGui"

-- Lua-themed button (dark blue/purple like Lua syntax)
local btn = Instance.new("ImageButton", screenGui)
btn.Name = "LuaSpeedBtn"
btn.Image = "rbxassetid://13129884510" -- Optional: Keep water texture or set to ""
btn.ImageTransparency = 0.9 -- Mostly transparent to show background color
btn.Size = UDim2.new(0, 100, 0, 40)
btn.Position = UDim2.new(0, 30, 0, 30)
btn.BackgroundColor3 = Color3.fromRGB(40, 40, 120) -- Dark Lua blue
btn.BackgroundTransparency = 0.2 -- Slightly transparent
btn.Active = true
btn.Draggable = true

-- TextLabel for speed display (Lua-style bright text)
local speedText = Instance.new("TextLabel", btn)
speedText.Name = "SpeedText"
speedText.Size = UDim2.new(1, 0, 1, 0)
speedText.BackgroundTransparency = 1
speedText.Text = "Speed: 16"
speedText.TextColor3 = Color3.fromRGB(200, 200, 255) -- Light blue (Lua text color)
speedText.Font = Enum.Font.GothamBlack
speedText.TextScaled = true

-- Rounded corners
local uibtn = Instance.new("UICorner", btn)
uibtn.CornerRadius = UDim.new(0, 10)

-- === SPEED HACK LOGIC (UNCHANGED) === --
local gmt = getrawmetatable(game)
setreadonly(gmt, false)

local oldIndex = gmt.__index
gmt.__index = newcclosure(function(self, key)
    if tostring(self) == "Humanoid" and key == "WalkSpeed" then
        return 20 -- Fake value
    end
    return oldIndex(self, key)
end)

print("Metatable hooked.")

local Players = game:GetService("Players")
local lp = Players.LocalPlayer

local humanoid
local fast = false

local function updateSpeed()
    if humanoid then
        humanoid.WalkSpeed = fast and 100 or 16
        speedText.Text = fast and "Speed: 100" or "Speed: 16"
    end
end

local function setupCharacter(char)
    humanoid = char:WaitForChild("Humanoid")
    updateSpeed()
    
    humanoid:GetPropertyChangedSignal("WalkSpeed"):Connect(function()
        if humanoid.WalkSpeed ~= (fast and 100 or 16) then
            updateSpeed()
        end
    end)
end

lp.CharacterAdded:Connect(setupCharacter)
if lp.Character then setupCharacter(lp.Character) end

btn.MouseButton1Click:Connect(function()
    fast = not fast
    updateSpeed()
end)
