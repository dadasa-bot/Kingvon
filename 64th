local Players = game:GetService("Players")
local lp = Players.LocalPlayer
local CoreGui = game:GetService("CoreGui")

local ScreenGui = Instance.new("ScreenGui", CoreGui)
ScreenGui.Name = "Screengui"

local Button = Instance.new("TextButton", Screengui)
Button.Size = UDim2.new(0, 120, 0, 40)
Button.Position = UDim2.new(0.5, -60, 0.9, 0)
Button.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
Button.TextColor3 = Color3.fromRGB(255, 255, 255)
Button.Text = "Speed: 16"
Button.Font = Enum.Font.SourceSansBold
Button.TextScaled = true

local uibtn = Instance.new("UICorner", Button)
uibtn.CornerRadius = UDim.new(0, 10)

-- Metatable override
local gmt = getrawmetatable(game)
local OldIndex = gmt.__index
setreadonly(gmt, false)

gmt.__index = newcclosure(function(self, k)
    if tostring(self) == "Humanoid" and k == "WalkSpeed" then
        return 20 -- Fake value to scripts reading it
    end
    return OldIndex(self, k)
end)

print("Metatable hooked.")

-- Handle character changes
local humanoid
local fast = false

local function setupCharacter(char)
    humanoid = char:WaitForChild("Humanoid")
    humanoid.WalkSpeed = fast and 100 or 16
end

lp.CharacterAdded:Connect(setupCharacter)
if lp.Character then
    setupCharacter(lp.Character)
end

Button.MouseButton1Click:Connect(function()
    fast = not fast
    if humanoid then
        humanoid.WalkSpeed = fast and 100 or 16
        Button.Text = "Speed: " .. (fast and "100" or "16")
    end
end)
